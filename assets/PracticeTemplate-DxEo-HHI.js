import{r as C,j as e}from"./index-CdtjvZuR.js";/* empty css                 */const u={MCQ:"mcq",FILL_IN:"fill-in",MATCH:"match",ORDER:"order",DIALOGUE:"dialogue"},R=({question:s,userAnswer:t,onAnswer:p,isSubmitted:c})=>e.jsxs("div",{children:[e.jsxs("p",{className:"question-prompt",children:[s.id,". ",s.question]}),s.hint&&e.jsxs("p",{className:"hint-text",children:["(",s.hint,")"]}),e.jsx("div",{className:"mcq-options",children:s.options.map((i,d)=>{const m=i.isCorrect,r=t===i.text;let a="mcq-option-label";return c?r&&m?a+=" correct-answer-selected":r&&!m?a+=" incorrect-answer-selected":m&&(a+=" correct-answer-not-selected"):r&&(a+=" selected"),e.jsxs("label",{className:a,children:[e.jsx("input",{type:"radio",name:`question-${s.id}`,value:i.text,checked:r,onChange:()=>p(i.text),disabled:c,className:"mcq-option-input"}),e.jsx("span",{className:"mcq-option-text",children:i.text})]},d)})})]}),O=({question:s,userAnswer:t,onAnswer:p,isSubmitted:c})=>{const i=t&&t.toLowerCase()===s.correctAnswer.toLowerCase();let d="fill-in-input";return c&&(d+=i?" correct-input":" incorrect-input"),e.jsxs("div",{children:[e.jsxs("p",{className:"question-prompt",children:[s.id,". ",s.question]}),s.hint&&e.jsxs("p",{className:"hint-text",children:["(",s.hint,")"]}),e.jsxs("div",{className:"fill-in-display",children:[e.jsx("span",{className:"fill-in-devanagari",children:s.question.replace("___","___ ")}),s.translation&&e.jsx("p",{className:"fill-in-translation",children:s.translation})]}),e.jsx("input",{type:"text",lang:"hi",autoComplete:"off",value:t||"",onChange:m=>p(m.target.value),disabled:c,className:d,placeholder:"Escribe en devanagari..."})]})},D=({question:s,userAnswer:t,onAnswer:p,isSubmitted:c})=>{const i=t&&t.toLowerCase()===s.correctAnswer.toLowerCase();let d="fill-in-input";c&&(d+=i?" correct-input":" incorrect-input");const m=s.question.split("___");return e.jsxs("div",{children:[e.jsxs("p",{className:"question-prompt",children:[s.id,". ",s.question]}),s.hint&&e.jsxs("p",{className:"hint-text",children:["(",s.hint,")"]}),e.jsx("div",{className:"dialogue-block",children:e.jsxs("p",{className:"dialogue-line",children:[e.jsx("span",{className:"dialogue-text",children:m[0]}),e.jsx("span",{className:"dialogue-blank",children:"[ _______ ]"}),e.jsx("span",{className:"dialogue-text",children:m[1]})]})}),e.jsx("input",{type:"text",lang:"hi",autoComplete:"off",value:t||"",onChange:r=>p(r.target.value),disabled:c,className:d,placeholder:"Escribe la palabra..."})]})},T=({question:s,userAnswer:t,onAnswer:p,isSubmitted:c})=>{const i=C.useMemo(()=>Object.keys(s.items),[s.items]),d=C.useMemo(()=>Object.values(s.items).sort(()=>Math.random()-.5),[s.items]),m=(r,a)=>{p({...t,[r]:a})};return e.jsxs("div",{children:[e.jsxs("p",{className:"question-prompt",children:[s.id,". ",s.question]}),s.hint&&e.jsxs("p",{className:"hint-text",children:["(",s.hint,")"]}),e.jsx("div",{className:"match-options",children:i.map(r=>{const a=t&&t[r]||"",b=a===s.items[r];let o="match-item";return c&&(o+=b?" correct-match-item":" incorrect-match-item"),e.jsxs("div",{className:o,children:[e.jsx("span",{className:"match-item-text",children:r}),e.jsxs("select",{value:a,onChange:x=>m(r,x.target.value),disabled:c,className:"match-select",children:[e.jsx("option",{value:"",children:"Selecciona..."}),d.map(x=>e.jsx("option",{value:x,children:x},x))]})]},r)})})]})},A=({question:s,userAnswer:t,onAnswer:p,isSubmitted:c})=>{const[i,d]=C.useState([]);C.useEffect(()=>{!t||t.length===0?d(s.items.sort(()=>Math.random()-.5)):d(s.items.filter(o=>!t.includes(o)))},[s.items,t]);const m=o=>{if(c)return;const x=[...t||[],o];p(x),d(i.filter(l=>l!==o))},r=(o,x)=>{if(c)return;const l=[...t];l.splice(x,1),p(l),d([...i,o])},a=t&&t.join(" ")===s.correctAnswer;let b="order-answer-area";return c&&(b+=a?" correct-order-area":" incorrect-order-area"),e.jsxs("div",{children:[e.jsxs("p",{className:"question-prompt",children:[s.id,". ",s.question]}),s.hint&&e.jsxs("p",{className:"hint-text",children:["(",s.hint,")"]}),e.jsxs("div",{className:b,children:[t&&t.map((o,x)=>e.jsx("button",{onClick:()=>r(o,x),disabled:c,className:"order-word-chip selected",children:o},x)),!t&&e.jsx("span",{className:"order-placeholder",children:"Haz clic en las palabras de abajo para construir la frase."})]}),e.jsx("div",{className:"order-word-bank",children:i.map(o=>e.jsx("button",{onClick:()=>m(o),disabled:c,className:"order-word-chip",children:o},o))})]})};function H({questions:s,title:t}){const[p,c]=C.useState(0),[i,d]=C.useState({}),[m,r]=C.useState(0),[a,b]=C.useState(!1),[o,x]=C.useState(!1),l=s[p],n=i[l==null?void 0:l.id],g=h=>{d({...i,[l.id]:h})},I=()=>{let h=!1;const{type:N,correctAnswer:k,items:v,options:_}=l;if(N===u.MCQ){const j=_.find(L=>L.isCorrect);h=n===(j==null?void 0:j.text)}else N===u.FILL_IN||N===u.DIALOGUE?h=n&&n.toLowerCase()===k.toLowerCase():N===u.ORDER?h=n&&n.join(" ")===k:N===u.MATCH&&(n?h=Object.keys(v).every(j=>n[j]===v[j]):h=!1);h&&r(m+1),b(!0)},E=()=>{b(!1),p<s.length-1?c(p+1):x(!0)},M=()=>{c(0),d({}),r(0),b(!1),x(!1)},Q=()=>{if(!l)return e.jsx("p",{children:"No hay preguntas disponibles."});const{type:h}=l;switch(h){case u.MCQ:return e.jsx(R,{question:l,userAnswer:n,onAnswer:g,isSubmitted:a});case u.FILL_IN:return e.jsx(O,{question:l,userAnswer:n,onAnswer:g,isSubmitted:a});case u.DIALOGUE:return e.jsx(D,{question:l,userAnswer:n,onAnswer:g,isSubmitted:a});case u.MATCH:return e.jsx(T,{question:l,userAnswer:n,onAnswer:g,isSubmitted:a});case u.ORDER:return e.jsx(A,{question:l,userAnswer:n,onAnswer:g,isSubmitted:a});default:return e.jsx("p",{children:"Tipo de pregunta no soportado."})}},y=()=>{if(!l)return null;const{type:h,correctAnswer:N,explanation:k,items:v,options:_}=l;let j=!1,L=N;if(h===u.MCQ){const f=_.find(w=>w.isCorrect);j=n===(f==null?void 0:f.text),L=f==null?void 0:f.text}else h===u.FILL_IN||h===u.DIALOGUE?j=n&&n.toLowerCase()===N.toLowerCase():h===u.ORDER?j=n&&n.join(" ")===N:h===u.MATCH&&(n?j=Object.keys(v).every(f=>n[f]===v[f]):j=!1,L=Object.entries(v).map(([f,w])=>`${f} -> ${w}`).join(", "));return e.jsxs("div",{className:`feedback-message ${j?"feedback-correct":"feedback-incorrect"}`,children:[e.jsx("strong",{className:"feedback-status",children:j?"¡Correcto!":"Incorrecto."}),!j&&e.jsxs("p",{className:"feedback-correct-answer",children:["La respuesta correcta es: ",e.jsx("strong",{className:"feedback-answer-text",children:L})]}),k&&e.jsx("p",{className:"feedback-explanation",children:k})]})};return o?e.jsx("div",{className:"practice-container",children:e.jsxs("div",{className:"practice-card",children:[e.jsx("h2",{className:"practice-title",children:"Práctica Completada"}),e.jsxs("p",{className:"results-score",children:["Tu puntuación: ",e.jsx("span",{className:"score-value",children:m})," / ",e.jsx("span",{className:"font-bold",children:s.length})]}),e.jsx("button",{onClick:M,className:"submit-button",children:"Volver a Empezar"})]})}):e.jsx("div",{className:"practice-container",children:e.jsxs("div",{className:"practice-card",children:[e.jsx("h1",{className:"practice-title",children:t||"Práctica de Hindi"}),e.jsx("div",{className:"question-block",children:Q()}),a&&y(),e.jsx("button",{onClick:a?E:I,className:"submit-button",disabled:!n&&!a,children:a?p===s.length-1?"Ver Resultados":"Siguiente":"Comprobar"})]})})}export{H as T};
